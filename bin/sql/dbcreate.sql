-- 회원
DROP TABLE IF EXISTS `TB_MEMBER` RESTRICT;

-- 회원 권한
DROP TABLE IF EXISTS `TB_MEMBER_ROLE` RESTRICT;

-- 스터디 그룹
DROP TABLE IF EXISTS `TB_STUDY_GROUP` RESTRICT;

-- 권한
DROP TABLE IF EXISTS `TB_ROLE` RESTRICT;

-- 참가 인원 별 진행 현황
DROP TABLE IF EXISTS `TB_PROGRESS_SIT` RESTRICT;

-- 그룹참가 인원
DROP TABLE IF EXISTS `TB_GROUP_MEMBER` RESTRICT;

-- 상세 내용
DROP TABLE IF EXISTS `TB_GROUP_DETAIL` RESTRICT;

-- 첨부 파일 그룹
DROP TABLE IF EXISTS `TB_UNITY_GROUP` RESTRICT;

-- 첨부 파일
DROP TABLE IF EXISTS `TB_UNITY` RESTRICT;

-- 스터디 묻고 답하기
DROP TABLE IF EXISTS `TB_GROUP_QNA` RESTRICT;

-- 스터디 가입 요청
DROP TABLE IF EXISTS `TB_STUDY_GROUP_REQUEST` RESTRICT;
CREATE TABLE tb_group_detail (
  GROUP_ID int(11) NOT NULL COMMENT '그룹ID',
  SUBTITLE_ID int(11) NOT NULL COMMENT '소제목ID',
  SUBTITLE_NM varchar(100) DEFAULT NULL COMMENT '소제목',
  SUBTITLE_CREATER varchar(100) DEFAULT NULL COMMENT '소제목 등록자',
  CONTENTS text COMMENT '내용',
  UNITY_GROUP_ID varchar(100) DEFAULT NULL COMMENT '첨부파일 GROUP ID',
  REG_DT varchar(8) DEFAULT NULL COMMENT '등록일',
  PRIMARY KEY (GROUP_ID,SUBTITLE_ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='상세 내용';

CREATE TABLE tb_group_member (
  ID varchar(30) NOT NULL COMMENT '회원ID',
  GROUP_ID varchar(30) NOT NULL COMMENT '그룹ID',
  GROUP_ROLE varchar(10) NOT NULL COMMENT '그룹내역할',
  REG_DT varchar(8) DEFAULT NULL COMMENT '가입일',
  PRIMARY KEY (ID,GROUP_ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='그룹참가 인원'
;
CREATE TABLE tb_group_qna (
  GROUP_ID int(10) unsigned NOT NULL COMMENT '그룹ID',
  QNA_ID int(10) unsigned NOT NULL COMMENT '질문번호',
  G_NO int(11) NOT NULL COMMENT '그룹번호',
  TITLE varchar(200) DEFAULT NULL COMMENT '제목',
  CONTENT varchar(300) DEFAULT NULL COMMENT '내용',
  REG_DT varchar(8) DEFAULT NULL COMMENT '등록일',
  HIT int(11) DEFAULT NULL COMMENT '조회수',
  O_NO int(11) DEFAULT NULL COMMENT '순서',
  DEPTH int(11) DEFAULT NULL COMMENT '글깊이',
  ID varchar(30) DEFAULT NULL COMMENT '회원번호',
  PRIMARY KEY (GROUP_ID,QNA_ID,G_NO)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='스터디 묻고 답하기'
;
CREATE TABLE tb_member (
  ID varchar(20) NOT NULL COMMENT '회원ID',
  PASSWORD varchar(100) DEFAULT NULL COMMENT '비밀번호',
  NAME varchar(20) DEFAULT NULL COMMENT '이름',
  EMAIL varchar(20) DEFAULT NULL COMMENT '이메일',
  REG_DT varchar(8) DEFAULT NULL COMMENT '가입일',
  PRIMARY KEY (ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='회원'

;
CREATE TABLE tb_member_role (
  ID varchar(30) NOT NULL COMMENT '회원ID',
  ROLE_NO varchar(30) NOT NULL COMMENT '권한번호',
  PRIMARY KEY (ID,ROLE_NO)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='회원 권한'
;

CREATE TABLE tb_progress_sit (
  GROUP_ID int(11) NOT NULL COMMENT '그룹ID',
  SUBTITLE_ID int(11) NOT NULL COMMENT '소제목ID',
  ID varchar(30) NOT NULL COMMENT '회원ID',
  PROGRESS_SIT varchar(500) DEFAULT NULL COMMENT '진행현황',
  UNITY_ID varchar(100) DEFAULT NULL COMMENT '첨부파일 GROUP ID',
  PROGRESSING int(11) DEFAULT NULL COMMENT '수행정도',
  LIMITDATE varchar(8) DEFAULT NULL COMMENT '완료일자',
  REG_DT varchar(8) DEFAULT NULL COMMENT '등록일',
  PRIMARY KEY (GROUP_ID,SUBTITLE_ID,ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='참가 인원 별 진행 현황'

;
CREATE TABLE tb_role (
  ROLE_ID varchar(30) NOT NULL COMMENT '권한번호',
  ROLE_NM varchar(30) DEFAULT NULL COMMENT '권한명',
  USE_AT varchar(1) DEFAULT NULL COMMENT '사용여부',
  REG_DT varchar(8) DEFAULT NULL COMMENT '등록일',
  MOD_DT varchar(8) DEFAULT NULL COMMENT '수정일',
  ROLE_EXPLAIN varchar(100) DEFAULT NULL COMMENT '설',
  PRIMARY KEY (ROLE_ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='권한'

;
CREATE TABLE tb_study_group (
  GROUP_ID int(11) NOT NULL COMMENT '그룹ID',
  GROUP_NM varchar(30) DEFAULT NULL COMMENT '그룹명',
  GROUP_FOUNDER varchar(30) DEFAULT NULL COMMENT '개설자',
  GROUP_BRIEF varchar(30) DEFAULT NULL COMMENT '요약',
  GROUP_EXPLAIN varchar(300) DEFAULT NULL COMMENT '설명',
  TOTAL int(10) DEFAULT NULL COMMENT '총인원',
  CURRENT_MEMBER int(10) DEFAULT NULL COMMENT '현재인원',
  REG_DT varchar(8) DEFAULT NULL COMMENT '개설일',
  USE_AT varchar(1) DEFAULT NULL COMMENT '사용여부',
  UNITY_GROUP_ID varchar(100) DEFAULT NULL COMMENT '첨부파일 GROUP ID',
  PRIMARY KEY (GROUP_ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='스터디 그룹'

;
CREATE TABLE tb_study_group_request (
  ID varchar(20) NOT NULL COMMENT '회원ID',
  GROUP_ID varchar(20) NOT NULL COMMENT '그룹ID',
  REG_DT varchar(8) DEFAULT NULL COMMENT '요청일',
  REQUEST_CONT varchar(200) DEFAULT NULL COMMENT '요청내',
  PRIMARY KEY (ID,GROUP_ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='스터디 가입 요청'
;
CREATE TABLE tb_unity (
  UNITY_ID varchar(300) NOT NULL COMMENT '첨부파일ID',
  NAME varchar(300) DEFAULT NULL COMMENT '제목',
  REG_DT varchar(8) DEFAULT NULL COMMENT '등록일',
  PRIMARY KEY (UNITY_ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='첨부 파일'
;
CREATE TABLE tb_unity_group (
  UNITY_GROUP_ID varchar(300) NOT NULL COMMENT '첨부파일 GROUP ID',
  UNITY_ID varchar(300) NOT NULL COMMENT '첨부파일ID',
  PRIMARY KEY (UNITY_GROUP_ID,UNITY_ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='첨부 파일 그룹';